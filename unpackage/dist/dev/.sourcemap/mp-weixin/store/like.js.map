{"version":3,"file":"like.js","sources":["store/like.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref, watch } from 'vue'\n\nexport const likeStore = defineStore('like', () => {\n  // 从本地读取数据并初始化 likeList\n  const storedData1 = uni.getStorageSync('likeList')\r\n  const storedData2 = uni.getStorageSync('downloadTitleList')\r\n  const storedData3 = uni.getStorageSync('userData')\n  const likeList = ref(storedData1 ? JSON.parse(storedData1) : [])\r\n  const userData = ref(storedData3 ? JSON.parse(storedData3) : {})\n\tconst downloadTitleList = ref(storedData2 ? JSON.parse(storedData2) : [])\n  // 添加收藏项\n  const addLikeList = (tempLikeItem) => {\n    likeList.value = [...likeList.value, tempLikeItem]\n  }\r\n  const addDownloadTitleList = (title) => {\r\n    downloadTitleList.value = [...downloadTitleList.value, title]\r\n  }\n  // 移除最后一个收藏项\n  const removeLikeList = () => {\n    likeList.value = likeList.value.slice(0, -1)\n  }\n\tconst updataLikeList = (list)=>{\r\n\t\tlikeList.value = list\r\n\t}\r\n\tconst updataUserData = (data)=>{\r\n\t\tuserData.value = data\r\n\t}\n  // 监听 likeList 变化，自动保存到本地\n  watch(\n    () => likeList.value,\n    (newVal) => {\n      uni.setStorageSync('likeList', JSON.stringify(newVal))\n    },\n    { deep: true }\n  )\r\n  watch(\r\n    () => downloadTitleList.value,\r\n    (newVal) => {\r\n      uni.setStorageSync('downloadTitleList', JSON.stringify(newVal))\r\n    },\r\n    { deep: true }\r\n  )\r\n  watch(\r\n    () => userData.value,\r\n    (newVal) => {\r\n      uni.setStorageSync('userData', JSON.stringify(newVal))\r\n    },\r\n    { deep: true }\r\n  )\n  return { likeList, addLikeList, removeLikeList,updataLikeList,downloadTitleList,updataUserData,addDownloadTitleList,userData }\n})"],"names":["defineStore","uni","ref","watch"],"mappings":";;AAGY,MAAC,YAAYA,cAAAA,YAAY,QAAQ,MAAM;AAEjD,QAAM,cAAcC,cAAAA,MAAI,eAAe,UAAU;AACjD,QAAM,cAAcA,cAAAA,MAAI,eAAe,mBAAmB;AAC1D,QAAM,cAAcA,cAAAA,MAAI,eAAe,UAAU;AACjD,QAAM,WAAWC,cAAAA,IAAI,cAAc,KAAK,MAAM,WAAW,IAAI,EAAE;AAC/D,QAAM,WAAWA,cAAAA,IAAI,cAAc,KAAK,MAAM,WAAW,IAAI,EAAE;AAChE,QAAM,oBAAoBA,cAAAA,IAAI,cAAc,KAAK,MAAM,WAAW,IAAI,EAAE;AAEvE,QAAM,cAAc,CAAC,iBAAiB;AACpC,aAAS,QAAQ,CAAC,GAAG,SAAS,OAAO,YAAY;AAAA,EAClD;AACD,QAAM,uBAAuB,CAAC,UAAU;AACtC,sBAAkB,QAAQ,CAAC,GAAG,kBAAkB,OAAO,KAAK;AAAA,EAC7D;AAED,QAAM,iBAAiB,MAAM;AAC3B,aAAS,QAAQ,SAAS,MAAM,MAAM,GAAG,EAAE;AAAA,EAC5C;AACF,QAAM,iBAAiB,CAAC,SAAO;AAC9B,aAAS,QAAQ;AAAA,EACjB;AACD,QAAM,iBAAiB,CAAC,SAAO;AAC9B,aAAS,QAAQ;AAAA,EACjB;AAEAC,gBAAK;AAAA,IACH,MAAM,SAAS;AAAA,IACf,CAAC,WAAW;AACVF,oBAAG,MAAC,eAAe,YAAY,KAAK,UAAU,MAAM,CAAC;AAAA,IACtD;AAAA,IACD,EAAE,MAAM,KAAM;AAAA,EACf;AACDE,gBAAK;AAAA,IACH,MAAM,kBAAkB;AAAA,IACxB,CAAC,WAAW;AACVF,oBAAG,MAAC,eAAe,qBAAqB,KAAK,UAAU,MAAM,CAAC;AAAA,IAC/D;AAAA,IACD,EAAE,MAAM,KAAM;AAAA,EACf;AACDE,gBAAK;AAAA,IACH,MAAM,SAAS;AAAA,IACf,CAAC,WAAW;AACVF,oBAAG,MAAC,eAAe,YAAY,KAAK,UAAU,MAAM,CAAC;AAAA,IACtD;AAAA,IACD,EAAE,MAAM,KAAM;AAAA,EACf;AACD,SAAO,EAAE,UAAU,aAAa,gBAAe,gBAAe,mBAAkB,gBAAe,sBAAqB,SAAU;AAChI,CAAC;;"}