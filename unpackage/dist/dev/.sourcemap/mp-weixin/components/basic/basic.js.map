{"version":3,"file":"basic.js","sources":["components/basic/basic.vue","E:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvbHVja3kvRGVza3RvcC9naXJsL2NvbXBvbmVudHMvYmFzaWMvYmFzaWMudnVl"],"sourcesContent":["<template>\n\t<view class=\"layout\">\r\n\t\t<view class=\"video\">\r\n\t\t\t<video ref=\"videoPlayer\" :src=\"url\" autoplay=\"true\" enable-play-gesture=\"true\" @ended=\"end\"></video>\r\n\t\t</view>\r\n\t\t<view class=\"toolBar\">\r\n\t\t\t<view class=\"like\" v-if=\"!islike\">\r\n\t\t\t\t<image src=\"/static/basic/收藏.png\" style=\"width: 100%;height: 100%;\" @click=\"like\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"likeed\" v-else>\r\n\t\t\t\t<image src=\"/static/basic/已收藏.png\" style=\"width: 100%;height: 100%;\" @click=\"like\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"text\" :class=\"{ani:isAni}\" id=\"text\" @click=\"get_video\">\r\n\t\t\t\t下一个\r\n\t\t\t</view>\r\n\t\t\t<view class=\"download\">\r\n\t\t\t\t<image src=\"/static/basic/下载.png\" style=\"width: 100%;height: 100%;\" @click=\"downloadVideo\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\t\r\n\t</view>\r\n\n</template>\n\n<script setup>\r\nimport { likeStore } from '../../store/like';\r\nimport { ref, onBeforeMount, onMounted } from 'vue';\r\n\r\nconst url = ref(\"https://alimov2.a.kwimgs.com/upic/2023/03/14/07/BMjAyMzAzMTQwNzMyMDRfMzEyNDcxOTkyNF85ODE2OTI5OTUxM18xXzM=_b_B48c337e8ee1a614653d500c9c3c6cf2c.mp4?clientCacheKey=3xhiww7s3qui8ng_b.mp4&tt=b&di=b72e16c7&bp=13414\\n\")\r\nlet index = 0\r\nconst urls = [\n    \"http://api.yujn.cn/api/zzxjj.php?type=json\",\n    \"http://api.yujn.cn/api/xjj.php?type=json\",\n    \"https://api.yujn.cn/api/nvda.php?type=json\",\n    \"http://api.yujn.cn/api/heisis.php?type=json\",\n    \"https://api.yujn.cn/api/manzhan.php?type=json\",\n    \"http://api.yujn.cn/api/baisis.php?type=json\",\n    \"http://api.yujn.cn/api/wmsc.php?type=json\",\n    \"http://api.yujn.cn/api/shejie.php?type=json\",\n    \"http://api.yujn.cn/api/diaodai.php?type=json\",\n    \"http://api.yujn.cn/api/jpmt.php?type=json\",\n    \"http://api.yujn.cn/api/hanfu.php?type=json\",\n    \"http://api.yujn.cn/api/qingchun.php?type=json\",\n    \"http://api.yujn.cn/api/luoli.php?type=json\"\n];\r\nconst isautoplay = ref(false)\r\nconst videoPlayer = ref(null);\r\nconst isAni = ref(false)\r\nconst islike = ref(false)\r\nconst likeList = ref([])\r\nconst title = ref(\"\")\r\n\r\nconst Store = likeStore()\r\nlikeList.value = Store.likeList\r\nfunction like(){\r\n\tislike.value = !islike.value\r\n\tif(islike.value)\r\n\t{\t\r\n\t\tif(Object.keys(Store.userData).length === 0)\r\n\t\t{\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle:\"你还没有登录，数据将保存在本地\",\r\n\t\t\t\tduration:1000\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst tempLikeItem = {\r\n\t\t\tid:0,\r\n\t\t\turl:\"\",\r\n\t\t\ttitle:\"\"\r\n\t\t}\r\n\t\ttempLikeItem.id = Store.likeList.length\r\n\t\ttempLikeItem.url = url.value\r\n\t\ttempLikeItem.title = title.value\r\n\t\tStore.addLikeList(tempLikeItem)\r\n\t}\r\n\telse\r\n\t{\r\n\t\tStore.removeLikeList()\r\n\t}\r\n\tconsole.log(Store.likeList);\r\n}\r\nasync function downloadVideo()\r\n{\r\n\tuni.showLoading()\r\n\tconst res =await uni.downloadFile({\r\n\t\turl:url.value,\r\n\t})\r\n\tif(res.statusCode==200)\r\n\t{\r\n\t\tconst data = await uni.saveFile({\r\n\t\t\ttempFilePath:res.tempFilePath,\r\n\t\t})\r\n\t\tuni.showToast({\r\n\t\t\ttitle:\"保存成功\",icon:'none',\r\n\t\t\tduration:1000\r\n\t\t})\r\n\t\tconsole.log(data.savedFilePath);\r\n\t\tStore.addDownloadTitleList(title.value)\r\n\t\tconsole.log(Store.downloadTitleList);\r\n\t\tuni.hideLoading()\r\n\t}\r\n}\r\nfunction getStorageSync(key) {\n    return new Promise((resolve, reject) => {\n        uni.getStorage({\n            key: key,\n            success(res) {\n                resolve(res.data);\n            },\n            fail(err) {\n                reject(err);\n            }\n        });\n    });\n}\r\n\r\nasync function get_video(){\r\n\tisAni.value = true\r\n\tislike.value = false\r\n\tisautoplay.value = await getStorageSync('autoplay');\r\n\tindex = await getStorageSync('line');\r\n\tuni.showNavigationBarLoading()\r\n\tconst res = await uni.request({\r\n\t\turl:urls[index],\r\n\t}).then(res=>{\r\n\t\turl.value=res.data.data\r\n\t\ttitle.value = res.data.title\r\n\t}).finally(()=>{\r\n\t\tuni.hideNavigationBarLoading()\r\n\t\tuni.hideLoading()\r\n\t})\r\n\tsetTimeout(()=>{\r\n\t\tisAni.value = false\r\n\t},300)\r\n\r\n}\r\n\r\nfunction end(){\r\n\t\r\n\tif(isautoplay.value===true)\r\n\t{\r\n\t\tget_video()\r\n\t}\r\n\telse if(isautoplay.value===false)\r\n\t{\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n}\r\nonMounted(()=>{\r\n\tlikeList.value = uni.getStorageSync('like')\r\n})\r\n\r\n\r\n\n</script>\n\n<style lang=\"scss\" scoped>\r\n@keyframes anima\r\n{\r\n\t0%{transform: scale(1);}\r\n\t25%{transform: scale(0.9);}\r\n\t75%{transform: scale(1.1);}\r\n\t100%{transform: scale(1);}\r\n}\r\n\r\n.layout{\r\n\t\r\n\t.video{\r\n\t\tmargin-left: auto;\r\n\t\tmargin-right: auto;\r\n\t\tmargin-top: 40rpx;\r\n\t\twidth: 600rpx;\r\n\t\theight: 70vh;\r\n\t\tbox-shadow: 10px 10px 20px rgba(0, 0, 0, 0.3), -10px -10px 20px rgba(255, 255, 255, 0.3);\r\n\t\tvideo{\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tobject-fit: contain;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t}\r\n\r\n\t\t\r\n\t}\r\n\t\t.text{\r\n\t\t\tborder:1px solid #ccc;\r\n\t\t\twidth: 400rpx;\r\n\t\t\theight: 7vh;\r\n\t\t\tmargin-left: 10rpx;\r\n\t\t\tmargin-right: 10rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\t\r\n\t\t\tfont-size: 38rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t}\r\n\t\t.text:hover{\r\n\t\t\tbox-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n\t\t}\r\n\t\t.ani{\r\n\t\t\tanimation: anima 0.3s ease-in-out;\r\n\t\t}\r\n\t.toolBar{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tmargin-top: 40rpx;\r\n\t\t.like{\r\n\t\t\twidth: 100rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t}\r\n\t\t.likeed{\r\n\t\t\twidth: 100rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t}\r\n\t\t.download{\r\n\t\t\twidth: 100rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t\tmargin-right: 20rpx;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n}\n\n</style>","import Component from 'C:/Users/lucky/Desktop/girl/components/basic/basic.vue'\nwx.createComponent(Component)"],"names":["ref","likeStore","uni","onMounted"],"mappings":"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"}